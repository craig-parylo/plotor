<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Produces an Odds Ratio Plot from a Logistic Regression Model • plotor</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Produces an Odds Ratio Plot from a Logistic Regression Model">
<meta name="description" content="Produces an odds‐ratio (OR) plot to visualise the results of a logistic regression model fitted with `glm(..., family = binomial)`. Estimates are converted to ORs with configurable confidence intervals (default is 95%). The package can return either a `ggplot2`-based plot, a formatted table via `gt`, or a set of diagnostic checks for model assumptions.">
<meta property="og:description" content="Produces an odds‐ratio (OR) plot to visualise the results of a logistic regression model fitted with `glm(..., family = binomial)`. Estimates are converted to ORs with configurable confidence intervals (default is 95%). The package can return either a `ggplot2`-based plot, a formatted table via `gt`, or a set of diagnostic checks for model assumptions.">
<meta property="og:image" content="https://craig-parylo.github.io/plotor/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">plotor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/using_plotor.html">Using plotor</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/craig-parylo/plotor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="readme">README<a class="anchor" aria-label="anchor" href="#readme"></a>
</h1>
</div>
<!-- README.md is generated from README.Rmd. Please edit that file -->
</div>
<div class="section level1">
<h1 id="plotor-">plotor 
<a class="anchor" aria-label="anchor" href="#plotor-"></a>
</h1>
<!-- badges: start -->

<!-- badges: end -->
<p>The goal of <code>plotor</code> is to generate Odds Ratio plots from logistic regression models.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>plotor</code> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"craig-parylo/plotor"</span><span class="op">)</span></span></code></pre></div>
<p>You can also install the latest released version from <a href="https://CRAN.R-project.org/package=plotor" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"plotor"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>In this example we will explore the likelihood of surviving the Titanic disaster based on passenger economic status (class), sex, and age group.</p>
<p>In addition to <code>plotor</code> the packages we will use include <code>dplyr</code>, <code>tidyr</code> and <code>forcats</code> for general data wrangling, the <code>stats</code> package to conduct the logistic regression followed by <code>broom</code> to tidy the output and convert the results to Odds Ratios and confidence intervals, then <code>ggplot2</code> to visualise the plot.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/craig-parylo/plotor" class="external-link">plotor</a></span><span class="op">)</span>      <span class="co"># generates Odds Ratio plots</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span>    <span class="co"># source of example data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>       <span class="co"># data wrangling</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>       <span class="co"># data wrangling - uncounting aggregated data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/" class="external-link">forcats</a></span><span class="op">)</span>     <span class="co"># data wrangling - handling factor variables</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">stats</span><span class="op">)</span>       <span class="co"># perform logistic regression using glm function</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span>       <span class="co"># tidying glm model and producing OR and CI</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>     <span class="co"># data visualisation</span></span></code></pre></div>
<p>Start with getting the data from the datasets package.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">datasets</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/datasets/Titanic.html" class="external-link">Titanic</a></span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="co"># convert counts to observations</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/uncount.html" class="external-link">uncount</a></span><span class="op">(</span>weights <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># convert categorical variables to factors.</span></span>
<span>  <span class="co"># we specify an order for levels in Class and Survival, otherwise ordering</span></span>
<span>  <span class="co"># in descending order of frequency</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Class <span class="op">=</span> <span class="va">Class</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct.html" class="external-link">fct</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'1st'</span>, <span class="st">'2nd'</span>, <span class="st">'3rd'</span>, <span class="st">'Crew'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    Sex <span class="op">=</span> <span class="va">Sex</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html" class="external-link">fct_infreq</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    Age <span class="op">=</span> <span class="va">Age</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_inorder.html" class="external-link">fct_infreq</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    Survived <span class="op">=</span> <span class="va">Survived</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct.html" class="external-link">fct</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'No'</span>, <span class="st">'Yes'</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We now have a tibble of data containing four columns:</p>
<ul>
<li><p><code>Survived</code> - our outcome variable describing whether the passenger survived <code>Yes</code> or died <code>No</code>,</p></li>
<li><p><code>Class</code> - the passenger class, either <code>1st</code>, <code>2nd</code>, <code>3rd</code> or <code>Crew</code>,</p></li>
<li><p><code>Sex</code> - the gender of the passenger, either <code>Male</code> or <code>Female</code>,</p></li>
<li><p><code>Age</code> - whether the passenger was an <code>Adult</code> or <code>Child</code>.</p></li>
</ul>
<p>We next conduct a logistic regression of survival (as a binary factor: ‘yes’ and ‘no’) against the characteristics of passenger class, sex and age group. For this we use the Generalised Linear Model function (<code>glm</code>) from the <code>stats</code> package, specifying:</p>
<ul>
<li><p>the family as ‘binomial’, and</p></li>
<li><p>the formula as survival being a function of <code>Class</code>, <code>Sex</code> and <code>Age</code>.</p></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># conduct a logistic regression of survival against the other variables</span></span>
<span><span class="va">lr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">df</span>, </span>
<span>  family <span class="op">=</span> <span class="st">'binomial'</span>, </span>
<span>  formula <span class="op">=</span> <span class="va">Survived</span> <span class="op">~</span> <span class="va">Class</span> <span class="op">+</span> <span class="va">Sex</span> <span class="op">+</span> <span class="va">Age</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Finally, we can plot the Odds Ratio of survival using the <code>plot_or</code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using plot_or </span></span>
<span><span class="fu"><a href="reference/plot_or.html">plot_or</a></span><span class="op">(</span>glm_model_results <span class="op">=</span> <span class="va">lr</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="100%"></p>
<p>This plot makes it clear that:</p>
<ul>
<li><p>Children were 2.89 times more likely to survive than Adults,</p></li>
<li><p>Passengers in <code>2nd</code>, <code>3rd</code> class as well as <code>Crew</code> were all less likely to survive than those in <code>1st</code> class,</p></li>
<li><p>Women were 11.25 times more likely to survive than men.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="table-outputs">Table outputs<a class="anchor" aria-label="anchor" href="#table-outputs"></a>
</h2>
<p>While an odds ratio plot can effectively visualise the direction and magnitude of relationships, a table of results offers additional information such as the value of the odds ratio, p-values and confidence intervals.</p>
<p>Use the <code><a href="reference/table_or.html">table_or()</a></code> function to return a tibble of details about our Titanic analysis:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using table_or</span></span>
<span><span class="fu"><a href="reference/table_or.html">table_or</a></span><span class="op">(</span>glm_model_results <span class="op">=</span> <span class="va">lr</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 14</span></span>
<span><span class="co">#&gt;   label level   rows outcome outcome_rate class  estimate std.error statistic</span></span>
<span><span class="co">#&gt;   &lt;fct&gt; &lt;fct&gt;  &lt;int&gt;   &lt;int&gt;        &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Class 1st      325     203        0.625 factor   NA        NA         NA   </span></span>
<span><span class="co">#&gt; 2 Class 2nd      285     118        0.414 factor    0.361     0.196     -5.19</span></span>
<span><span class="co">#&gt; 3 Class 3rd      706     178        0.252 factor    0.169     0.172    -10.4 </span></span>
<span><span class="co">#&gt; 4 Class Crew     885     212        0.240 factor    0.424     0.157     -5.45</span></span>
<span><span class="co">#&gt; 5 Sex   Male    1731     367        0.212 factor   NA        NA         NA   </span></span>
<span><span class="co">#&gt; 6 Sex   Female   470     344        0.732 factor   11.2       0.140     17.2 </span></span>
<span><span class="co">#&gt; 7 Age   Adult   2092     654        0.313 factor   NA        NA         NA   </span></span>
<span><span class="co">#&gt; 8 Age   Child    109      57        0.523 factor    2.89      0.244      4.35</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: p.value &lt;dbl&gt;, conf.low &lt;dbl&gt;, conf.high &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   significance &lt;chr&gt;, comparator &lt;dbl&gt;</span></span></code></pre></div>
<p>You can also output these details into a formatted table complete with a mini OR plot, which is ideal for inclusion in reports and publications. To do this, add <code>output = "gt"</code> as part of the <code><a href="reference/table_or.html">table_or()</a></code> function call.</p>
<p><img src="inst/img/table_or.png"></p>
</div>
<div class="section level2">
<h2 id="assumption-checks">Assumption checks<a class="anchor" aria-label="anchor" href="#assumption-checks"></a>
</h2>
<p>New to <code>plotor</code> is a new suite of automated checks. These checks verify the data used in your logistic regression analysis upholds the required assumptions, providing an added layer of confidence in your results.</p>
<table style="width:90%;" class="table">
<caption>
Assumptions for logistic regression
</caption>
<colgroup>
<col style="width: 23%">
<col style="width: 45%">
<col style="width: 20%">
</colgroup>
<thead><tr>
<th>
Assumption
</th>
<th>
Description
</th>
<th>
Status
</th>
</tr></thead>
<tbody>
<tr>
<td>
The outcome variable is <strong>binary</strong>
</td>
<td>
<code>plotor</code> is designed to work with an outcome variable that has only two possible values, i.e. outcome is <strong>binary</strong>.
</td>
<td>
✅
</td>
</tr>
<tr>
<td>
The predictor variables should <strong>not be highly correlated</strong> with each other
</td>
<td>
<p>
Predictor variables which have high levels of correlation with each other is known as <strong>multicollinearity</strong>.
</p>
<p>
Where this is the case the odds ratio estimates are likely to be unstable, confidence intervals are likely to be much larger, both of which make it difficult to interpret the results.
</p>
</td>
<td>
✅
</td>
</tr>
<tr>
<td>
The outcome is <strong>not separated</strong> by predictors
</td>
<td>
<p>
In logistic regression, <strong>separation</strong> occurs when a predictor variable (or a combination of predictor variables) perfectly predicts the outcome variable.
</p>
<p>
Separation results in infinite or extremely large odds ratios and possibly issues with non-convergence of the logistic regression model, making it difficult for the model to estimate the coefficients.
</p>
</td>
<td>
✅
</td>
</tr>
<tr>
<td>
The sample size is large enough
</td>
<td>
The sample size should be large enough to provide reliable estimates of the odds ratio. A general rule of thumb is to have at least 10 events (or outcomes of interest) per predictor variable.
</td>
<td>
✅
</td>
</tr>
<tr>
<td>
The observations are independent
</td>
<td>
Each observation should be independent of the others. This means that the outcome for one observation should not be influenced by the outcome of another observation.
</td>
<td>
In development
</td>
</tr>
<tr>
<td>
There are no extreme outlier values
</td>
<td>
The data should not contain outliers or influential observations that can significantly affect the estimates of the odds ratio.
</td>
<td>
In development
</td>
</tr>
<tr>
<td>
There is a linear relationship between continuous predictors and the logit
</td>
<td>
The relationship between continuous predictor variables and the log odds of the outcome should be linear.
</td>
<td>
✅
</td>
</tr>
</tbody>
</table>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=plotor" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/craig-parylo/plotor/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/craig-parylo/plotor/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing plotor</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Craig Parylo <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-4297-7808" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=plotor" class="external-link"><img src="https://www.r-pkg.org/badges/version/plotor" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=plotor" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/plotor"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Craig Parylo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
